{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import API from\"../api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function UserList(){const[users,setUsers]=useState([]);const[loading,setLoading]=useState(true);const API_URL=process.env.REACT_APP_API_URL||\"http://localhost:7000\";const loggedUser=JSON.parse(localStorage.getItem(\"user\"));useEffect(()=>{fetchUsers();},[]);const fetchUsers=async()=>{try{const res=await API.get(\"/auth/users\");setUsers(res.data);setLoading(false);}catch(err){console.error(err);setLoading(false);}};const handleDelete=async id=>{const confirm=window.confirm(\"Are you sure you want to delete this user?\");if(!confirm)return;try{const token=localStorage.getItem(\"token\");await API.delete(\"/auth/users/\".concat(id),{headers:{Authorization:\"Bearer \".concat(token)}});alert(\"User deleted successfully\");fetchUsers();}catch(err){var _err$response,_err$response$data;console.error(err);alert(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Failed to delete user\");}};if(loading)return/*#__PURE__*/_jsx(\"p\",{style:{textAlign:\"center\"},children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"20px\"},children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:\"#6b3fa0\",textAlign:\"center\",marginBottom:\"20px\"},children:\"User List\"}),/*#__PURE__*/_jsxs(\"table\",{style:{width:\"100%\",borderCollapse:\"collapse\",boxShadow:\"0 2px 8px rgba(0,0,0,0.1)\",borderRadius:\"10px\",overflow:\"hidden\",backgroundColor:\"#fff\"},children:[/*#__PURE__*/_jsx(\"thead\",{style:{background:\"#ede4ff\"},children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{padding:\"12px\",textAlign:\"center\"},children:\"Image\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:\"12px\"},children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:\"12px\"},children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:\"12px\"},children:\"Phone\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:\"12px\"},children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:\"12px\",textAlign:\"center\"},children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.length>0?users.map(u=>/*#__PURE__*/_jsxs(\"tr\",{style:{borderBottom:\"1px solid #ddd\",transition:\"background 0.2s\"},onMouseEnter:e=>e.currentTarget.style.background=\"#f9f9f9\",onMouseLeave:e=>e.currentTarget.style.background=\"#fff\",children:[/*#__PURE__*/_jsx(\"td\",{style:{padding:\"10px\",textAlign:\"center\"},children:/*#__PURE__*/_jsx(\"img\",{src:u.image?\"\".concat(API_URL).concat(u.image):\"\".concat(API_URL,\"/uploads/default.png\"),alt:u.name,width:80,height:80,style:{borderRadius:\"50%\",objectFit:\"cover\"}})}),/*#__PURE__*/_jsx(\"td\",{style:{padding:\"10px\",fontWeight:\"500\"},children:u.name}),/*#__PURE__*/_jsx(\"td\",{style:{padding:\"10px\"},children:u.email}),/*#__PURE__*/_jsx(\"td\",{style:{padding:\"10px\"},children:u.phone}),/*#__PURE__*/_jsx(\"td\",{style:{padding:\"10px\",textTransform:\"capitalize\"},children:u.role}),/*#__PURE__*/_jsxs(\"td\",{style:{padding:\"10px\",textAlign:\"center\"},children:[loggedUser.id===u._id&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.href=\"/profile/edit/\".concat(u._id),style:{marginRight:\"5px\",padding:\"6px 12px\",backgroundColor:\"#6b3fa0\",color:\"#fff\",border:\"none\",borderRadius:\"5px\",cursor:\"pointer\"},children:\"Edit\"}),loggedUser.role===\"admin\"&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(u._id),style:{padding:\"6px 12px\",backgroundColor:\"#ff4d4f\",color:\"#fff\",border:\"none\",borderRadius:\"5px\",cursor:\"pointer\"},children:\"Delete\"})]})]},u._id)):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"6\",style:{padding:\"20px\",textAlign:\"center\"},children:\"No users found.\"})})})]})]});}","map":{"version":3,"names":["React","useEffect","useState","API","jsx","_jsx","jsxs","_jsxs","UserList","users","setUsers","loading","setLoading","API_URL","process","env","REACT_APP_API_URL","loggedUser","JSON","parse","localStorage","getItem","fetchUsers","res","get","data","err","console","error","handleDelete","id","confirm","window","token","delete","concat","headers","Authorization","alert","_err$response","_err$response$data","response","message","style","textAlign","children","padding","color","marginBottom","width","borderCollapse","boxShadow","borderRadius","overflow","backgroundColor","background","length","map","u","borderBottom","transition","onMouseEnter","e","currentTarget","onMouseLeave","src","image","alt","name","height","objectFit","fontWeight","email","phone","textTransform","role","_id","onClick","location","href","marginRight","border","cursor","colSpan"],"sources":["C:/Users/aswathi/Downloads/job-tracker/job-tracker/client/src/components/UserList.js"],"sourcesContent":["\r\nimport React, { useEffect, useState } from \"react\";\r\nimport API from \"../api\";\r\n\r\nexport default function UserList() {\r\n  const [users, setUsers] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const API_URL = process.env.REACT_APP_API_URL || \"http://localhost:7000\";\r\n\r\n  const loggedUser = JSON.parse(localStorage.getItem(\"user\")); \r\n\r\n  useEffect(() => {\r\n    fetchUsers();\r\n  }, []);\r\n\r\n  const fetchUsers = async () => {\r\n    try {\r\n      const res = await API.get(\"/auth/users\");\r\n      setUsers(res.data);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    const confirm = window.confirm(\"Are you sure you want to delete this user?\");\r\n    if (!confirm) return;\r\n\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      await API.delete(`/auth/users/${id}`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      alert(\"User deleted successfully\");\r\n      fetchUsers();\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(err.response?.data?.message || \"Failed to delete user\");\r\n    }\r\n  };\r\n\r\n  if (loading) return <p style={{ textAlign: \"center\" }}>Loading...</p>;\r\n\r\n  return (\r\n    <div style={{ padding: \"20px\" }}>\r\n      <h2 style={{ color: \"#6b3fa0\", textAlign: \"center\", marginBottom: \"20px\" }}>\r\n        User List\r\n      </h2>\r\n\r\n      <table\r\n        style={{\r\n          width: \"100%\",\r\n          borderCollapse: \"collapse\",\r\n          boxShadow: \"0 2px 8px rgba(0,0,0,0.1)\",\r\n          borderRadius: \"10px\",\r\n          overflow: \"hidden\",\r\n          backgroundColor: \"#fff\",\r\n        }}\r\n      >\r\n        <thead style={{ background: \"#ede4ff\" }}>\r\n          <tr>\r\n            <th style={{ padding: \"12px\", textAlign: \"center\" }}>Image</th>\r\n            <th style={{ padding: \"12px\" }}>Name</th>\r\n            <th style={{ padding: \"12px\" }}>Email</th>\r\n            <th style={{ padding: \"12px\" }}>Phone</th>\r\n            <th style={{ padding: \"12px\" }}>Role</th>\r\n            <th style={{ padding: \"12px\", textAlign: \"center\" }}>Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {users.length > 0 ? (\r\n            users.map((u) => (\r\n              <tr\r\n                key={u._id}\r\n                style={{\r\n                  borderBottom: \"1px solid #ddd\",\r\n                  transition: \"background 0.2s\",\r\n                }}\r\n                onMouseEnter={(e) => (e.currentTarget.style.background = \"#f9f9f9\")}\r\n                onMouseLeave={(e) => (e.currentTarget.style.background = \"#fff\")}\r\n              >\r\n                {/* Image */}\r\n                <td style={{ padding: \"10px\", textAlign: \"center\" }}>\r\n                  <img\r\n                    src={\r\n                      u.image\r\n                        ? `${API_URL}${u.image}`\r\n                        : `${API_URL}/uploads/default.png`\r\n                    }\r\n                    alt={u.name}\r\n                    width={80}\r\n                    height={80}\r\n                    style={{ borderRadius: \"50%\", objectFit: \"cover\" }}\r\n                  />\r\n                </td>\r\n\r\n                {/* Name */}\r\n                <td style={{ padding: \"10px\", fontWeight: \"500\" }}>{u.name}</td>\r\n\r\n                {/* Email */}\r\n                <td style={{ padding: \"10px\" }}>{u.email}</td>\r\n\r\n                {/* Phone */}\r\n                <td style={{ padding: \"10px\" }}>{u.phone}</td>\r\n\r\n                {/* Role */}\r\n                <td style={{ padding: \"10px\", textTransform: \"capitalize\" }}>\r\n                  {u.role}\r\n                </td>\r\n\r\n                {/* Actions */}\r\n                <td style={{ padding: \"10px\", textAlign: \"center\" }}>\r\n                  {loggedUser.id === u._id && (\r\n                    <button\r\n                      onClick={() => window.location.href = `/profile/edit/${u._id}`}\r\n                      style={{\r\n                        marginRight: \"5px\",\r\n                        padding: \"6px 12px\",\r\n                        backgroundColor: \"#6b3fa0\",\r\n                        color: \"#fff\",\r\n                        border: \"none\",\r\n                        borderRadius: \"5px\",\r\n                        cursor: \"pointer\",\r\n                      }}\r\n                    >\r\n                      Edit\r\n                    </button>\r\n                  )}\r\n                  {loggedUser.role === \"admin\" && (\r\n                    <button\r\n                      onClick={() => handleDelete(u._id)}\r\n                      style={{\r\n                        padding: \"6px 12px\",\r\n                        backgroundColor: \"#ff4d4f\",\r\n                        color: \"#fff\",\r\n                        border: \"none\",\r\n                        borderRadius: \"5px\",\r\n                        cursor: \"pointer\",\r\n                      }}\r\n                    >\r\n                      Delete\r\n                    </button>\r\n                  )}\r\n                </td>\r\n              </tr>\r\n            ))\r\n          ) : (\r\n            <tr>\r\n              <td colSpan=\"6\" style={{ padding: \"20px\", textAlign: \"center\" }}>\r\n                No users found.\r\n              </td>\r\n            </tr>\r\n          )}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}